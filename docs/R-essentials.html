<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.299">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>R essentials</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="R-essentials_files/libs/clipboard/clipboard.min.js"></script>
<script src="R-essentials_files/libs/quarto-html/quarto.js"></script>
<script src="R-essentials_files/libs/quarto-html/popper.min.js"></script>
<script src="R-essentials_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="R-essentials_files/libs/quarto-html/anchor.min.js"></script>
<link href="R-essentials_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="R-essentials_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="R-essentials_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="R-essentials_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="R-essentials_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">R essentials</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="install-r" class="level4">
<h4 class="anchored" data-anchor-id="install-r">Install R</h4>
<section id="install-r-for-the-first-time" class="level5">
<h5 class="anchored" data-anchor-id="install-r-for-the-first-time">Install R for the <span class="flow">First Time</span></h5>
<ol type="1">
<li><a href="https://cloud.r-project.org/">download R</a>
<ul>
<li>for debian: <a href="https://cran.r-project.org/bin/linux/debian/">Johannes Ranke</a>. For Linux/Debian installation, crucial to update the <em>source.list</em> to include sources that have more recent versions of R. If not, will get very old R versions that is not compatible with many packages.</li>
<li>add R to path for Windows. In Windows Path, add for example: <em>C:/Program Files/R/R-3.6.2/bin/x64/</em> and <em>C:/Rtools/bin</em></li>
</ul></li>
<li><a href="https://cran.r-project.org/bin/windows/Rtools/">Install Rtools</a> for building R packages.</li>
<li><a href="https://rstudio.com/products/rstudio/download/">download R-studio</a></li>
<li>Open R-studio and auto-detect R</li>
<li>Install additional packages</li>
</ol>
</section>
<section id="linux-r-install" class="level5">
<h5 class="anchored" data-anchor-id="linux-r-install">Linux R Install</h5>
<p>For linux/Debian, to Install latest R:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Go to get latesdebian latest r sources.list</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> /etc/apt/sources.lis</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="sec-r-essentials" class="level1">
<h1>R essentials</h1>
<p><strong>Required material</strong></p>
<ul>
<li>Read <em>The Kitchen Counter Observatory</em>, <span class="citation" data-cites="kieranskitchen">(<a href="#ref-kieranskitchen" role="doc-biblioref"><strong>kieranskitchen?</strong></a>)</span>
<ul>
<li>Discussion of what data hides and reveals.</li>
</ul></li>
<li>Read <em>R for Data Science</em>, Chapter 4 “Data transformation”, <span class="citation" data-cites="r4ds">(<a href="#ref-r4ds" role="doc-biblioref">Wickham, Çetinkaya-Rundel, and Grolemund 2023</a>)</span>
<ul>
<li>Provides an overview of manipulating datasets using <code>dplyr</code>.</li>
</ul></li>
<li>Read <em>Data Feminism</em>, Chapter 6 “The Numbers Don’t Speak for Themselves”, <span class="citation" data-cites="datafeminism2020">(<a href="#ref-datafeminism2020" role="doc-biblioref"><strong>datafeminism2020?</strong></a>)</span>
<ul>
<li>Discusses the need to consider data within the broader context that generated them.</li>
</ul></li>
<li>Read <em>R Generation</em>, <span class="citation" data-cites="Thieme2018">(<a href="#ref-Thieme2018" role="doc-biblioref"><strong>Thieme2018?</strong></a>)</span>
<ul>
<li>Provides background information about R.</li>
</ul></li>
</ul>
<p><strong>Key concepts and skills</strong></p>
<ul>
<li>Understanding foundational aspects of R and RStudio enables a gradual improvement of workflows. For instance, being able to use key <code>dplyr</code> verbs and make graphs with <code>ggplot2</code> makes manipulating and understanding datasets easier.</li>
<li>But there is an awful lot of functionality in the <code>tidyverse</code> including importing data, dataset manipulation, string manipulation, and factors. You do not need to know it all at once, but it is important to know that you do not yet know it.</li>
<li>Beyond the <code>tidyverse</code> it is also important to know that foundational aspects, common to many languages, exist and can be added to data science workflows. For instance, class, functions, and data simulation all have an important role to play.</li>
</ul>
<p><strong>Key libraries and functions</strong></p>
<ul>
<li>Base R
<ul>
<li><code>|</code> “or”</li>
<li><code>&amp;</code> “and”</li>
<li><code>|&gt;</code> “pipe”</li>
<li><code>$</code> “extract”</li>
<li><code>as.character()</code></li>
<li><code>as.integer()</code></li>
<li><code>c()</code></li>
<li><code>citation()</code></li>
<li><code>class()</code></li>
<li><code>function()</code></li>
<li><code>head()</code></li>
<li><code>library()</code></li>
<li><code>max()</code></li>
<li><code>mean()</code></li>
<li><code>print()</code></li>
<li><code>rnorm()</code></li>
<li><code>round()</code></li>
<li><code>runif()</code></li>
<li><code>sample()</code></li>
<li><code>set.seed()</code></li>
<li><code>sum()</code></li>
</ul></li>
<li>Core <code>tidyverse</code> <span class="citation" data-cites="tidyverse">(<a href="#ref-tidyverse" role="doc-biblioref"><strong>tidyverse?</strong></a>)</span>
<ul>
<li><code>dplyr</code> <span class="citation" data-cites="citedplyr">(<a href="#ref-citedplyr" role="doc-biblioref"><strong>citedplyr?</strong></a>)</span>
<ul>
<li><code>arrange()</code></li>
<li><code>case_when()</code></li>
<li><code>count()</code></li>
<li><code>filter()</code></li>
<li><code>group_by()</code></li>
<li><code>if_else()</code></li>
<li><code>left_join()</code></li>
<li><code>mutate()</code></li>
<li><code>pull()</code></li>
<li><code>rename()</code></li>
<li><code>select()</code></li>
<li><code>slice()</code></li>
<li><code>summarise()</code></li>
</ul></li>
<li><code>forcats</code> <span class="citation" data-cites="citeforcats">(<a href="#ref-citeforcats" role="doc-biblioref"><strong>citeforcats?</strong></a>)</span>
<ul>
<li><code>as_factor()</code></li>
<li><code>fct_relevel()</code></li>
</ul></li>
<li><code>ggplot2</code> <span class="citation" data-cites="citeggplot">(<a href="#ref-citeggplot" role="doc-biblioref"><strong>citeggplot?</strong></a>)</span>
<ul>
<li><code>facet_wrap()</code></li>
<li><code>geom_density()</code></li>
<li><code>geom_histogram()</code></li>
<li><code>geom_point()</code></li>
<li><code>ggplot()</code></li>
</ul></li>
<li><code>readr</code> <span class="citation" data-cites="citereadr">(<a href="#ref-citereadr" role="doc-biblioref"><strong>citereadr?</strong></a>)</span>
<ul>
<li><code>read_csv()</code></li>
</ul></li>
<li><code>stringr</code> <span class="citation" data-cites="citestringr">(<a href="#ref-citestringr" role="doc-biblioref"><strong>citestringr?</strong></a>)</span>
<ul>
<li><code>str_detect()</code></li>
<li><code>str_replace()</code></li>
<li><code>str_squish()</code></li>
</ul></li>
<li><code>tibble</code> <span class="citation" data-cites="tibble">(<a href="#ref-tibble" role="doc-biblioref"><strong>tibble?</strong></a>)</span>
<ul>
<li><code>tibble()</code></li>
</ul></li>
<li><code>tidyr</code> <span class="citation" data-cites="citetidyr">(<a href="#ref-citetidyr" role="doc-biblioref"><strong>citetidyr?</strong></a>)</span>
<ul>
<li><code>pivot_longer()</code></li>
<li><code>pivot_wider()</code></li>
</ul></li>
</ul></li>
<li>Outer <code>tidyverse</code> <span class="citation" data-cites="tidyverse">(<a href="#ref-tidyverse" role="doc-biblioref"><strong>tidyverse?</strong></a>)</span> (these need to be loaded separately e.g.&nbsp;<code>library("haven")</code>)
<ul>
<li><code>haven</code> <span class="citation" data-cites="citehaven">(<a href="#ref-citehaven" role="doc-biblioref"><strong>citehaven?</strong></a>)</span>
<ul>
<li><code>read_dta()</code></li>
</ul></li>
<li><code>lubridate</code> <span class="citation" data-cites="GrolemundWickham2011">(<a href="#ref-GrolemundWickham2011" role="doc-biblioref"><strong>GrolemundWickham2011?</strong></a>)</span>
<ul>
<li><code>ymd()</code></li>
</ul></li>
</ul></li>
<li><code>janitor</code> <span class="citation" data-cites="janitor">(<a href="#ref-janitor" role="doc-biblioref"><strong>janitor?</strong></a>)</span>
<ul>
<li><code>clean_names()</code></li>
</ul></li>
</ul>
<section id="background" class="level2">
<h2 class="anchored" data-anchor-id="background">Background</h2>
<p>In this chapter we focus on foundational skills needed to use the statistical programming language R <span class="citation" data-cites="citeR">(<a href="#ref-citeR" role="doc-biblioref"><strong>citeR?</strong></a>)</span> to tell stories with data. Some of it may not make sense at first, but these are skills and approaches that we will often use. You should initially go through this chapter quickly, noting aspects that you do not understand. Then come back to this chapter from time to time as you continue through the rest of the book. That way you will see how the various bits fit into context.</p>
<p>R is an open-source language for statistical programming. You can download R for free from the <a href="https://cran.r-project.org">Comprehensive R Archive Network</a> (CRAN). RStudio is an Integrated Development Environment (IDE) for R which makes the language easier to use and can be downloaded for free from Posit <a href="https://www.rstudio.com/products/rstudio/">here</a>.</p>
<p>The past ten years or so have been characterized by the increased use of the <code>tidyverse</code>. This is “…an opinionated collection of R packages designed for data science. All packages share an underlying design philosophy, grammar, and data structures” <span class="citation" data-cites="tidyversewebsite">(<a href="#ref-tidyversewebsite" role="doc-biblioref"><strong>tidyversewebsite?</strong></a>)</span>. There are three distinctions to be clear about: the original R language, typically referred to as “base”; the <code>tidyverse</code> which is a coherent collection of packages that build on top of base, and other packages.</p>
<p>Essentially everything that we can do in the <code>tidyverse</code>, we can also do in base. But, as the <code>tidyverse</code> was built especially for data science it is often easier to use, especially when learning. Additionally, most everything that we can do in the <code>tidyverse</code>, we can also do with other packages. But, as the <code>tidyverse</code> is a coherent collection of packages, it is often easier to use, again, especially when learning. Eventually there are cases where it makes sense to trade-off the convenience and coherence of the <code>tidyverse</code> for some features of base, other packages, or languages. Indeed, we introduce SQL in <strong>?@sec-store-and-share</strong> as one source of considerable efficiency gain when working with data. For instance, the <code>tidyverse</code> can be slow, and so if one needs to import thousands of CSVs then it can make sense to switch away from <code>read_csv()</code>. The appropriate use of base and non-tidyverse packages, or even other languages, rather than dogmatic insistence on a particular solution, is a sign of intellectual maturity.</p>
<p>Central to our use of the statistical programming language R is data, and most of the data that we use will have humans at the heart of it. Sometimes, dealing with human-centered data in this way can have a numbing effect, resulting in over-generalization, and potentially problematic work. Another sign of intellectual maturity is when it has the opposite effect, increasing our awareness of our decision-making processes and their consequences.</p>
<blockquote class="blockquote">
<p>In practice, I find that far from distancing you from questions of meaning, quantitative data forces you to confront them. The numbers draw you in. Working with data like this is an unending exercise in humility, a constant compulsion to think through what you can and cannot see, and a standing invitation to understand what the measures really capture—what they mean, and for whom.</p>
<p><span class="citation" data-cites="kieranskitchen">(<a href="#ref-kieranskitchen" role="doc-biblioref"><strong>kieranskitchen?</strong></a>)</span></p>
</blockquote>
</section>
<section id="r-rstudio-and-posit-cloud" class="level2">
<h2 class="anchored" data-anchor-id="r-rstudio-and-posit-cloud">R, RStudio, and Posit Cloud</h2>
<p>R and RStudio are complementary, but they are not the same thing. <span class="citation" data-cites="vistransrep">(<a href="#ref-vistransrep" role="doc-biblioref"><strong>vistransrep?</strong></a>)</span> explain their relationship by analogy, where R is like an engine and RStudio is like a car—we can use engines in a lot of different situations, and they are not limited to being used in cars, but the combination is especially useful.</p>
<section id="r" class="level3">
<h3 class="anchored" data-anchor-id="r">R</h3>
<p><a href="https://www.r-project.org/">R</a> is an open-source and free programming language that is focused on general statistics. Free in this context does not refer to a price of zero, but instead to the freedom that the creators give users to largely do what they want with it (although it also does have a price of zero). This is in contrast with an open-source programming language that is designed for general purpose, such as Python, or an open-source programming language that is focused on probability, such as Stan. It was created by Ross Ihaka and Robert Gentleman at the University of Auckland in the 1990s, and traces its provenance to S, which was developed at Bell Labs in the 1970s. It is maintained by the R Core Team and changes to this “base” of code occur methodically and with concern given to a variety of different priorities.</p>
<p>Many people build on this stable base, to extend the capabilities of R to better and more quickly suit their needs. They do this by creating packages. Typically, although not always, a package is a collection of R code, mostly functions, and this allows us to more easily do things that we want to do. These packages are managed by repositories such as CRAN and Bioconductor.</p>
<p>If you want to use a package, then you first need to install it on your computer, and then you need to load it when you want to use it. Dr Di Cook, Professor of Business Analytics at Monash University, describes this as analogous to a lightbulb. If you want light in your house, first you need to fit a lightbulb, and then you need to turn the switch on. Installing a package, say, <code>install.packages("tidyverse")</code>, is akin to fitting a lightbulb into a socket—you only need to do this once for each lightbulb. But then each time you want light you need to turn on the switch to the lightbulb, which in the R packages case, means drawing on your library, say, <code>library(tidyverse)</code>.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Shoulders of giants
</div>
</div>
<div class="callout-body-container callout-body">
<p>Dr Di Cook is Professor of Business Analytics at Monash University. After earning a PhD in statistics from Rutgers University in 1993 where she focused on statistical graphics, she was appointed as an assistant professor at Iowa State University, being promoted to full professor in 2005, and in 2015 she moved to Monash. One area of her research is data visualization, especially interactive and dynamic graphics. One particularly important paper is <span class="citation" data-cites="buja1996interactive">(<a href="#ref-buja1996interactive" role="doc-biblioref"><strong>buja1996interactive?</strong></a>)</span> which proposes a taxonomy of interactive data visualization and associated software XGobi.</p>
</div>
</div>
<p>To install a package on your computer (again, we will need to do this only once per computer) we use <code>install.packages()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"tidyverse"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>And then when we want to use the package, we use <code>library()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Having downloaded it, we can open R and use it directly. It is primarily designed to be interacted with through the command line. While this is functional, it can be useful to have a richer environment than the command line provides. In particular, it can be useful to install an Integrated Development Environment (IDE), which is an application that brings together various bits and pieces that will be used often. One common IDE for R is RStudio, although others such as Visual Studio are also used.</p>
</section>
<section id="rstudio" class="level3">
<h3 class="anchored" data-anchor-id="rstudio">RStudio</h3>
<p>RStudio is distinct to R, and they are different entities. RStudio builds on top of R to make it easier to use R. This is in the same way that one could use the internet from the command line, but most people use a browser such as Chrome, Firefox, or Safari.</p>
<p>RStudio is free in the sense that we do not pay for it. It is also free in the sense of being able to take the code, modify it, and distribute that code. But the maker of RStudio, Posit, is a company, albeit it a B Corp, and so it is possible that the current situation could change. It can be downloaded from Posit <a href="https://www.rstudio.com/products/rstudio/">here</a>.</p>
<p>When we open RStudio it will look like <a href="#fig-first">Figure&nbsp;1</a>.</p>
<div id="fig-first" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/01.png" class="img-fluid figure-img" style="width:90.0%"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;1: Opening RStudio for the first time</figcaption><p></p>
</figure>
</div>
<p>The left pane is a console in which you can type and execute R code line by line. Try it with 2+2 by clicking next to the prompt “&gt;”, typing “2+2”, and then pressing “return/enter”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="sc">+</span> <span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
</div>
<p>The pane on the top right has information about the environment. For instance, when we create variables a list of their names and some properties will appear there. Next to the prompt type the following code, replacing Zahid with your name, and again press enter.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>my_name <span class="ot">&lt;-</span> <span class="st">"Zahid"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The <code>&lt;-</code>, or “assignment operator”, allocates <code>"Zahid"</code> to an object called “my_name”. You should notice a new value in the environment pane with the variable name and its value.</p>
<p>The pane in the bottom right is a file manager. At the moment it should just have two files: an R History file and a R Project file. We will get to what these are later, but for now we will create and save a file.</p>
<p>Run the following code, without worrying too much about the details for now. And you should see a new “.rds” file in your list of files.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(<span class="at">object =</span> my_name, <span class="at">file =</span> <span class="st">"my_first_file.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="posit-cloud" class="level3">
<h3 class="anchored" data-anchor-id="posit-cloud">Posit Cloud</h3>
<p>While you can and should download RStudio to your own computer, initially we recommend using <a href="https://posit.cloud">Posit Cloud</a>. This is an online version of RStudio that is provided by Posit. We will use this so that you can focus on getting comfortable with R and RStudio in an environment that is consistent. This way you do not have to worry about what computer you have or installation permissions, amongst other things.</p>
<p>The free version of Posit Cloud is free as is no financial cost. The trade-off is that it is not very powerful, and it is sometimes slow, but for the purposes of getting started it is enough.</p>
</section>
</section>
<section id="getting-started" class="level2">
<h2 class="anchored" data-anchor-id="getting-started">Getting started</h2>
<p>We will now start going through some code. It is important to actively write this all out yourself.</p>
<p>While working line-by-line in the console is fine, it is easier to write out a whole script that can then be run. We will do this by making an R Script (“File” -&gt; “New File” -&gt; “R Script”). The console pane will fall to the bottom left and an R Script will open in the top left. We will write some code that will get all of the Australian federal politicians and then construct a small table about the genders of the prime ministers. Some of this code will not make sense at this stage, but just type it all out to get into the habit and then run it. To run the whole script, we can click “Run” or we can highlight certain lines and then click “Run” to just run those lines.</p>

</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" role="list">
<div id="ref-r4ds" class="csl-entry" role="listitem">
Wickham, Hadley, Mine Çetinkaya-Rundel, and Garrett Grolemund. 2023. <em>R for Data Science</em>. 2nd ed. O’Reilly Media. <a href="https://r4ds.hadley.nz">https://r4ds.hadley.nz</a>.
</div>
</div></section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>